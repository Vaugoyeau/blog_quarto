{
  "hash": "8391a9c2f1ddccdf6d8ecf9a9395a482",
  "result": {
    "markdown": "---\ntitle: \"Les graphiques avec `{ggplot2}`\"\nauthor: \"Marie Vaugoyeau\"\ndate: \"2022/12/13\"\ndate-format: \"D MMMM YYYY\"\ncategories: [twitch, Rnewbies, analyse de donnÃ©es, graphique]\ntoc: true\ntoc-title: Sur cette page\n---\n\n\n[![](troncs_nouees.png){fig-align=\"center\"}](https://500px.com/p/antoinemach?view=photos)\n\n::: {.callout-note icon=\"false\"}\n**Twitch du 13 dÃ©cembre 2022**\\\nLa vidÃ©o n'est malheureusment plus disponible suite Ã  une erreur de manipulation ðŸ˜…\\\nCode disponible sur [GitHub](https://github.com/Vaugoyeau/twitch_graphique_ggplot2)\n:::\n\n\n\n\n\n# RÃ©aliser un graphique nuage des points avec `{ggplot2}`\n\n## Important\n\nLes graphiques avec le package `{ggplot2}` se rÃ©alise par couche.\\\nIl y a donc une importance sur les couches pour ne pas masquer des Ã©lÃ©ments.\n\n## Masse de poussins\n\nUtilisation du jeu de donnÃ©es `ChickWeight` prÃ©sent de base dans R qui donne les poids de 50 poulets sur les 21 premiers jours de vie selon 4 rÃ©gimes alimentaires.\\\nPlus d'informations sur la page d'aide associÃ©e `help(ChickWeight)`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# appel du {tidyverse}\nlibrary(tidyverse)\n\n# graphique de base\nplot(ChickWeight)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# rien dessus\nggplot(data = ChickWeight)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-2.png){width=672}\n:::\n\n```{.r .cell-code}\n# choix des dimension mais pas de reprÃ©sentation\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-3.png){width=672}\n:::\n\n```{.r .cell-code}\n# ajout de la couche points !\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-4.png){width=672}\n:::\n\n```{.r .cell-code}\n# amÃ©lioration du rendu du grpahique\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight)) +\n  geom_point() +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-5.png){width=672}\n:::\n\n```{.r .cell-code}\n# ajout de la couleur en fonction du poussin\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight, color = Chick)) +\n  geom_point() +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-6.png){width=672}\n:::\n\n```{.r .cell-code}\n# retirer la lÃ©gende / erreur ordre des couches !\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight, color = Chick)) +\n  geom_point() +\n  theme(legend.position = \"none\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-7.png){width=672}\n:::\n\n```{.r .cell-code}\n# retirer la lÃ©gende ok \nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight, color = Chick)) +\n  geom_point() +\n  theme_classic() +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-8.png){width=672}\n:::\n\n```{.r .cell-code}\n# forme des points en fonction du rÃ©gime\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight, color = Chick, shape = Diet)) +\n  geom_point() +\n  theme_classic() +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-9.png){width=672}\n:::\n\n```{.r .cell-code}\n# ajout de la lÃ©gende seulement pour le type de rÃ©gime\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight, color = Chick, shape = Diet)) +\n  geom_point() +\n  theme_classic() +\n  guides(color = \"none\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-10.png){width=672}\n:::\n\n```{.r .cell-code}\n# ajout de ligne\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight, color = Chick, shape = Diet)) +\n  geom_point() +\n  geom_line() +\n  theme_classic() +\n  guides(color = \"none\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-11.png){width=672}\n:::\n\n```{.r .cell-code}\n# si on retire la couleur\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight, shape = Diet)) +\n  geom_point() +\n  geom_line() +\n  theme_classic() +\n  guides(color = \"none\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-12.png){width=672}\n:::\n\n```{.r .cell-code}\n# ajout du groupe\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight, shape = Diet, groupe = Chick)) +\n  geom_point() +\n  geom_line() +\n  theme_classic() +\n  guides(color = \"none\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-13.png){width=672}\n:::\n\n```{.r .cell-code}\n# concentration sur le rÃ©gime\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight, color = Diet, groupe = Chick)) +\n  geom_point() +\n  geom_line() +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-14.png){width=672}\n:::\n\n```{.r .cell-code}\n# changement de couleur\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight, color = Diet, groupe = Chick)) +\n  geom_point() +\n  geom_line() +\n  scale_color_manual(values = c(\"gold\", \"blue\", \"red\", \"darkgreen\")) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-15.png){width=672}\n:::\n\n```{.r .cell-code}\n# si on surpprime une modalitÃ© cela change les couleurs des suivantes donc mieux vaut utiliser un vecteur\nChickWeight %>% \n  filter(Diet != 3) %>%\n  ggplot(mapping = aes(x = Time, y = weight, color = Diet, groupe = Chick)) +\n  geom_point() +\n  geom_line() +\n  scale_color_manual(values = c(\"gold\", \"blue\", \"red\", \"darkgreen\")) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-16.png){width=672}\n:::\n\n```{.r .cell-code}\n# par vecteur\ncouleur <- c(\"1\" = \"blue\", \"2\" = \"darkgreen\", \"3\" = \"gold\", \"4\" = \"red\")\n\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight, color = Diet, groupe = Chick)) +\n  geom_point() +\n  geom_line() +\n  scale_color_manual(values = couleur) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-17.png){width=672}\n:::\n\n```{.r .cell-code}\n# tendance par rÃ©gime\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight, color = Diet)) +\n  geom_point() +\n  geom_smooth() +\n  scale_color_manual(values = couleur) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-18.png){width=672}\n:::\n\n```{.r .cell-code}\n# rÃ©gression linÃ©aire\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight, color = Diet)) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  scale_color_manual(values = couleur) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-19.png){width=672}\n:::\n\n```{.r .cell-code}\n# attenuer les points\nggplot(data = ChickWeight, mapping = aes(x = Time, y = weight, color = Diet)) +\n  geom_point(alpha = 0.3) +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  scale_color_manual(values = couleur) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/base_graph_ggplot2-20.png){width=672}\n:::\n:::\n\n\n# DiffÃ©rence entre histogramme et diagramme en barres\n\n## DÃ©finitions\n\n**Histogramme** : Graphique permettant de reprÃ©senter la distribution des donnÃ©es d'une variable quantitative.\\\n**Diagramme en barres** : Graphique reprÃ©sentant la distribution des modalitÃ©s d'une variable qualitative.\n\n## Exemples\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# histogramme du poids\nChickWeight %>% \n  ggplot() +\n  aes(x = weight) +\n  geom_histogram() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/histogramme_diagramme_en_barres-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# changement du nombre d'intervalles\nChickWeight %>% \n  ggplot() +\n  aes(x = weight) +\n  geom_histogram(bins = 10) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/histogramme_diagramme_en_barres-2.png){width=672}\n:::\n\n```{.r .cell-code}\n# changement de la taille de l'intervalle\nChickWeight %>% \n  ggplot() +\n  aes(x = weight) +\n  geom_histogram(binwidth = 10) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/histogramme_diagramme_en_barres-3.png){width=672}\n:::\n\n```{.r .cell-code}\n# ajout du rÃ©gime\nChickWeight %>% \n  ggplot() +\n  aes(x = weight, fill = Diet) +\n  geom_histogram(binwidth = 10) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/histogramme_diagramme_en_barres-4.png){width=672}\n:::\n\n```{.r .cell-code}\n#sÃ©paration des barres\nChickWeight %>% \n  ggplot() +\n  aes(x = weight, fill = Diet) +\n  geom_histogram(binwidth = 10, position = \"dodge\") +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/histogramme_diagramme_en_barres-5.png){width=672}\n:::\n\n```{.r .cell-code}\n# diagramme en barres sur le poids \nChickWeight %>% \n  ggplot() +\n  aes(x = weight) +\n  geom_bar() +\n  theme_light()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/histogramme_diagramme_en_barres-6.png){width=672}\n:::\n\n```{.r .cell-code}\n# diagramme en barres sur les rÃ©gimes\nChickWeight %>% \n  ggplot() +\n  aes(x = Diet) +\n  geom_bar() +\n  theme_light()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/histogramme_diagramme_en_barres-7.png){width=672}\n:::\n\n```{.r .cell-code}\n# 100 ligne de plus pour le rÃ©gime 1\nChickWeight %>% \n  count(Diet)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nGrouped Data: weight ~ Time | Chick\n  Diet   n\n1    1 220\n2    2 120\n3    3 120\n4    4 118\n```\n:::\n\n```{.r .cell-code}\n# Diagramme en barres sur les poussins\nChickWeight %>% \n  ggplot() +\n  aes(x = Chick, y = weight) +\n  geom_bar(stat = \"identity\") +\n  theme_light()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/histogramme_diagramme_en_barres-8.png){width=672}\n:::\n\n```{.r .cell-code}\n# construction somme des poids \nChickWeight %>% \n  ggplot() +\n  aes(x = Chick, y = weight, fill = Time) +\n  geom_bar(stat = \"identity\") +\n  theme_light()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/histogramme_diagramme_en_barres-9.png){width=672}\n:::\n\n```{.r .cell-code}\n# ajout du rÃ©gime\nChickWeight %>% \n  ggplot() +\n  aes(x = Chick, y = weight, fill = Time, color = Diet) +\n  geom_bar(stat = \"identity\") +\n  theme_light()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/histogramme_diagramme_en_barres-10.png){width=672}\n:::\n\n```{.r .cell-code}\n# prise de poids\nChickWeight %>% \n  group_by(Chick) %>% \n  mutate(\n    poids = weight - lag(weight)\n  ) %>% \n  ungroup() %>% \n  ggplot() + \n  aes(Chick,y = poids, fill = Time) +\n  geom_bar(stat = \"identity\") +\n  theme_light()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/histogramme_diagramme_en_barres-11.png){width=672}\n:::\n:::\n\n\n# Graphique plus poussÃ©\n\n## BoÃ®tes Ã  moustaches\n\nExplication d'une boÃ®te Ã  moustache\n\n::: {.callout-note icon=\"false\"}\nQ = Quartile\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nquartile <- quantile(ChickWeight$weight)\n\nggplot(data = ChickWeight) +\n  geom_boxplot(aes(weight)) +\n  geom_text(\n    aes(\n      x = min(weight),\n      y = - 0.2 ,\n      label = \"Maximum entre :\\nQ1 - 1,5 * (Q3 - Q1)\\net Minimum (ici)\"\n      )\n  ) +\n  geom_text(\n    aes(\n      x = quartile[2],\n      y = 0.5,\n      label = \"Q1\\n(25%)\"\n    ),\n    inherit.aes = FALSE\n  ) +\n  geom_text(\n    aes(\n      x = quartile[3],\n      y = - 0.55,\n      label = \"Q2\\n(50%)\\nMÃ©diane\"\n    ),\n    inherit.aes = FALSE\n  ) +\n  geom_text(\n    aes(\n      x = quartile[4],\n      y = 0.5,\n      label = \"Q3\\n(75%)\"\n    ),\n    inherit.aes = FALSE\n  ) +\n  geom_text(\n    aes(\n      x = 300, \n      y = 0.2, \n      label = \"Minimum entre :\\nQ3 + 1,5 * (Q3 - Q1) (ici)\\net Maximum\")) +\n  geom_text(\n    aes(\n      x = 350,\n      y = -0.1,\n      label = \"Valeurs extrÃªmes\"\n    ),\n    color = \"red\"\n  ) +\n  xlim(0, 400) +\n  ylim(-0.65, 0.6) +\n  ylab(\"\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/boite_a_moustache-1.png){width=672}\n:::\n:::\n\n\n## BoÃ®tes Ã  moustache en fonction du rÃ©gime\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# boÃ®te Ã  moustache simple\nggplot(ChickWeight) +\n  aes(x = weight) +\n  geom_boxplot() +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/boite_a_moustache_regime-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# ajout du rÃ©gime\nggplot(ChickWeight) +\n  aes(x = weight, y = Diet) +\n  geom_boxplot() +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/boite_a_moustache_regime-2.png){width=672}\n:::\n\n```{.r .cell-code}\n# ajout de couleur du rÃ©gime\nggplot(ChickWeight) +\n  aes(weight, y = Diet, color = Diet) +\n  geom_boxplot() +\n  scale_color_manual(values = couleur) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/boite_a_moustache_regime-3.png){width=672}\n:::\n\n```{.r .cell-code}\n# ajout des points\nggplot(ChickWeight) +\n  aes(weight, y = Diet, color = Diet) +\n  geom_point() +\n  geom_boxplot() +\n  scale_color_manual(values = couleur) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/boite_a_moustache_regime-4.png){width=672}\n:::\n\n```{.r .cell-code}\n# montrer l'importance des couches\nggplot(ChickWeight) +\n  aes(weight, y = Diet, color = Diet) +\n  geom_boxplot() +\n  geom_point() +\n  scale_color_manual(values = couleur) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/boite_a_moustache_regime-5.png){width=672}\n:::\n\n```{.r .cell-code}\n# ajout de la transparance pour les points\nggplot(ChickWeight) +\n  aes(weight, y = Diet, color = Diet) +\n  geom_boxplot() +\n  geom_point(alpha = 0.3) +\n  scale_color_manual(values = couleur) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/boite_a_moustache_regime-6.png){width=672}\n:::\n\n```{.r .cell-code}\n# utilisation de la dispersion des points\nggplot(ChickWeight) +\n  aes(weight, y = Diet, color = Diet) +\n  geom_boxplot() +\n  geom_jitter(alpha = 0.3) +\n  scale_color_manual(values = couleur) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/boite_a_moustache_regime-7.png){width=672}\n:::\n\n```{.r .cell-code}\n# poids = var rÃ©ponse\nggplot(ChickWeight) +\n  aes(y = weight, x = Diet, color = Diet) +\n  geom_boxplot() +\n  geom_jitter(alpha = 0.3) +\n  scale_color_manual(values = couleur) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/boite_a_moustache_regime-8.png){width=672}\n:::\n:::\n\n\n# Graphique combinÃ©\n\nTrÃ¨s proche du graphique prÃ©sentÃ© prÃ©cÃ©demment avec plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# charger le package {GGally}\nlibrary(GGally)\n\n# crÃ©ation du graphique\nggpairs(ChickWeight, columns = 1:2, aes(color=Diet))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/graph_combine-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# ajout de la couleur choisi\nggpairs(ChickWeight, columns = 1:2, aes(color=Diet)) + \n  scale_color_manual(values = couleur)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/graph_combine-2.png){width=672}\n:::\n\n```{.r .cell-code}\n# idem mais pour les courbes\nggpairs(ChickWeight, columns = 1:2, aes(color=Diet)) + \n  scale_color_manual(values = couleur) + \n  scale_fill_manual(values = couleur)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/graph_combine-3.png){width=672}\n:::\n\n```{.r .cell-code}\n# theme_classic appliquÃ©\nggpairs(ChickWeight, columns = 1:2, aes(color=Diet)) + \n  scale_color_manual(values = couleur) + \n  scale_fill_manual(values = couleur) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/graph_combine-4.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}